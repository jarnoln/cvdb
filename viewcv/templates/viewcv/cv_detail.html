{% extends "viewcv/base.html" %}

{% load account %}
{% load i18n %}

{% block head_title %}{% if cv.title %}{{ cv.title }}{% else %}CV{% endif %}{% endblock %}
{% block content %}
<div class="row">
  <div class="col-2"> &nbsp; </div>
  <div class="col-8">
  <br />
<h1> {{ cv.user.first_name }} {{ cv.user.last_name }} &nbsp; <small class="text-muted"> {{ cv.title }} </small> </h1>

{% with info=cv.personal %}
<table class="table table-sm">
  <tbody>
  {% if info.image %}
    <tr>
      <td rowspan="6" width="10%">
        <img alt="{{ user.username }}" src="{{ info.image }}" />
      </td>
    </tr>
  {% endif %}
  {% if info.email %} <tr> <th width="20%"> {% trans 'Email' %} </th> <td> {{ info.email }} </td> </tr> {% endif %}
  {% if info.phone %} <tr> <th width="20%"> {% trans 'Phone' %} </th> <td> {{ info.phone }} </td> </tr> {% endif %}
  {% if info.url %}
    <tr>
      <th> {% trans 'Home page' %} </th>
      <td> <a href="{{ info.url }}"> {{ info.url }} </a> </td>
    </tr>
  {% endif %}

  {% if cv.skill_set.count > 0 %}
    <tr>
      <th> Skills </th>
      <td>
        {% for skill in cv.skill_set.all %}
          {% if forloop.last %}
            {{ skill.name }}
          {% else %}
            {{ skill.name }},
          {% endif %}
        {% endfor %}
      </td>
    </tr>
  {% endif %}

  {% if cv.language_set.count > 0 %}
    <tr>
      <th> Languages </th>
      <td>
        {% for lang in cv.language_set.all %}
          {% if forloop.last %}
            {{ lang.name }}
          {% else %}
            {{ lang.name }},
          {% endif %}
        {% endfor %}
      </td>
    </tr>
  {% endif %}

  {% if info.summary %} <tr> <td colspan="2"> {{ info.summary|safe }} </td> </tr> {% endif %}
  </tbody>
</table>
{% endwith %}

<h3> {%  trans 'Work experience' %} </h3>

<ul>
{% for work in cv.work_set.all %}
  <li> <strong> {{ work.start_date|date:"Y-m" }} / {{ work.end_date|date:"Y-m" }} ({{ work.duration_str }})
      {{ work.position }} at
    {% if work.url %}
      <a href="{{ work.url }}">{{ work.name }}</a>
    {% else %}
      {{ work.name }}
    {% endif %}
     </strong>
    <ul> <li> {{ work.summary }} </li> </ul>
  </li>
{% endfor %}
</ul>

<h3> {%  trans 'Education' %} </h3>

<ul>
{% for edu in cv.education_set.all %}
  <li> <strong> {{ edu.start_date|date:"Y-m" }} / {{ edu.end_date|date:"Y-m" }} ({{ edu.duration_str }})
    {% if edu.study_type and edu.area and edu.institution %}
      {{ edu.study_type }} of {{ edu.area }} at
    {% elif edu.study_type and edu.institution %}
      {{ edu.study_type }} at
    {% elif edu.area and edu.institution %}
      {{ edu.area }} at
    {% endif %}
    {% if edu.url %}
      <a href="{{ edu.url }}">{{ edu.institution }}</a>
    {% else %}
      {{ edu.institution }}
    {% endif %}
   </strong>
    {% if edu.summary %}<ul> <li> {{ edu.summary|safe }} </li> </ul>{% endif %}
  </li>
{% endfor %}
</ul>

{% if cv.volunteer_set.count > 0 %}
<h3> {%  trans 'Other experience' %} </h3>
<ul>
  {% for vol in cv.volunteer_set.all %}
  <li>
    <strong>
      {{ vol.start_date|date:"Y" }}
    {% if vol.duration_years %}
      / {{ vol.end_date|date:"Y" }}
    {% endif %}
      {{ vol.position }} in
    {% if vol.url %}
      <a href="{{ vol.url }}">{{ vol.organization }}</a>
    {% else %}
      {{ vol.organization }}
    {% endif %}
    </strong>
    {% if vol.summary %}
    <ul> <li> {{ vol.summary|safe }} </li> </ul>
    {% endif %}
  </li>
  {% endfor %}
</ul>
{% endif %}

{% if cv.project_set.count > 0 %}
<h3> {%  trans 'Hobby projects' %} </h3>
<ul>
  {% for project in cv.project_set.all %}
  <li>
    <strong>
      {{ project.start_date|date:"Y" }}
    {% if vol.duration_years %}
      / {{ project.end_date|date:"Y" }}
    {% endif %}
    {% if project.url %}
      <a href="{{ project.url }}">{{ project.name }}</a>
    {% else %}
      {{ project.name }}
    {% endif %}
    </strong>
    {% if project.description %}
    <ul> <li> {{ project.description|safe }} </li> </ul>
    {% endif %}
  </li>
  {% endfor %}
</ul>
{% endif %}

  </div>
  <div class="col-2"> &nbsp; </div>
</div>
{% endblock content %}
